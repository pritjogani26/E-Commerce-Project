<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Booking</title>
    <link rel="stylesheet" href="/static/Room_Booking/Room_Booking.css">
    {% comment %} <link rel="stylesheet" href="/static/Feedback/Feedback.css"> {% endcomment %}
    <link rel="stylesheet" href="/static/HeaderAndFooter/HeaderAndFooter.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <!-- Header_02 -->
    <header>
        <div class="header">
            <div class="icon-box">
                <div class="logo">
                    <img src="/static/Images/logo.jpg" alt="logo" height="100px" width="100px">
                    <h1>Shree Kashtabhanjan Dev Hanumanji Mandir, Salangpur</h1>
                </div>
            </div>
        </div>

        <nav>
            <div class="navbar">
                <ul class="main-ul">
                    <li class="point-color"><a href="Home">Home</a></li>
                    <li class="point-color">
                        <a>Online Service</a>
                        <ul>
                            <li><a href="Room_Booking">Room Booking</a></li>
                            <li><a href="Store">Online Store</a></li>
                        </ul>
                    </li>
                    <li class="point-color"><a href="Donation">Donation</a></li>
                    <li class="point-color">
                        <a>General Information</a>
                        <ul>
                            <li><a href="Information">Information</a></li>
                            <li><a href="Schedule">Schedule</a></li>
                        </ul>
                    </li>

                    <li class="point-color">
                        <a>Gallery</a>
                        <ul>
                            <li><a href="Photo_Gallery">Photos Gallery</a></li>
                            <li><a href="Festival_Gallery">Event Gallery</a></li>
                        </ul>
                    </li>

                    <li class="point-color"><a href="News_And_Event">News and Events</a></li>
                    <li class="point-color"><a href="Feedback">Feedback</a></li>
                    {% if user.is_authenticated %}
                        <li class="point-color"><a href="Profile" id="login-button">Profile</a></li>
                        <li class="point-color"><a href="{% url 'handlelogout' %}" id="singUp-button">Log-out</a></li>
                    {% else %}
                        <li class="point-color"><a href="SignIn" id="login-button">Log-In</a></li>
                        <li class="point-color"><a href="SignUp" id="singUp-button">Sign-Up</a></li>
                    {% endif %}
                </ul>
            </div>
        </nav>
    </header>
    <div class="booking_container">
        <div class="heading">
            <h2>Room Booking</h2>
        </div>
        <form id="bookingForm" method="POST" action="Room_Booking">
            {% csrf_token %}

            <div class="form-group">
                {% if user.is_authenticated %}
                    <label for="uname">Username:</label>
                    <input type="text" id="username" name="uname" value="{{ user_obj.0.username }}" readonly required>
                {% else %}
                    <label for="uname">Username:</label>
                    <input type="text" id="username" name="uname" placeholder="Enter Username" required readonly>
                {% endif %}

                <label for="dob">Current Date : </label>
                <input type="date" id="today" name="today" readonly required>
                  
            </div>
            <div class="form-group">
                <label for="place">Place:</label>
                <select id="place" name="place" required>
                    <option value="Salangpur Mandir" selected>Salangpur Mandir</option>
                </select>

                <label for="purpose">Visit Purpose:</label>
                <select id="purpose" name="purpose" required>
                    <option value="" disabled selected>Select</option>
                    <option value="darshan">Darshan Only</option>
                    <option value="general">General visit</option>
                    <option value="mahapuja">Mahapuja</option>
                    <option value="medical">Medical Reason</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="checkIn">Check-in Time:</label>
                <input type="datetime-local" id="checkIn" name="checkIn" required>

                <label for="checkOut">Check-out Time:</label>
                <input type="datetime-local" id="checkOut" name="checkOut" required>

            </div>

            <div class="form-group">
                <label for="maleGuests">Number of Guests:</label>
                <select id="maleGuests" name="maleGuests" class="gselect" required>
                    <option value="" disabled selected>Male</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>

                <select id="femaleGuests" name="femaleGuests" class="gselect" required>
                    <option value="" disabled selected>Female</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>

                <select id="childrenGuests" name="childrenGuests" class="gselect" required>
                    <option value="" disabled selected>Children</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </div>

            <div class="form-group" id="room">
                <label for="rooms">Number of Rooms:</label>
                <select id="rooms" name="rooms" required>
                    <option value="" disabled selected>Select Room for Booking</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
                <label>Total Available Rooms are : {{Aroom.0.available_rooms}}</label>
            </div>
            <div class="form-group" id="room">
                <label for="Cost">Total Cost :</label>
                <input type="number" id="cost" name="cost" readonly>
            </div>

            <input type="submit" id="submit" name="submit" value="Submit">
        </form>
    </div>

    <!-- Footer_02 -->
    <footer>
        <div class="footer">
            <div class="links">

                <div class="content-list">
                    <p><i class="fa-solid fa-arrows-to-dot footer-icon main-icon"></i>Useful Links : </p>
                    <ul type="none">
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Home">Home</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Information">Information</a>
                        </li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Schedule">Schedule</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Photo_Gallery">Photo Gallery</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Festival_Gallery">Event Gallery</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Room_Booking">Room Booking</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Store">Spiritual Store</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="Donation">Donation</a></li>
                        <li><i class="fa-solid fa-hand-point-right footer-icon"></i><a href="News_And_Event">Event and News</a></li>
                    </ul>
                </div>

                <div class="download-app">
                    <p><i class="fa-solid fa-arrows-to-dot footer-icon main-icon"></i>Download App :</p>
                    <div class="download-links">
                        <a href="https://play.google.com/store/apps/details?id=com.kastbhanjandev.salangpur&hl=en">
                            <img src="/static/Images/google-play.png" alt="Google Play" class="app-icon">
                        </a>
                        <a href="https://apps.apple.com/in/app/salangpur-hanumanji/id990972878">
                            <img src="/static/Images/app-store.png" alt="App Store" class="app-icon">
                        </a>
                    </div>
                </div>

                <div class="location">
                    <p><i class="fa-solid fa-arrows-to-dot footer-icon main-icon"></i>Location :</p>
                    <a href="https://maps.app.goo.gl/DjssB7pYamfEH6xu7">
                        <img src="/static/Images/location.png" alt="Location" class="location-icon">
                    </a>
                </div>

                <div class="social-icon">
                    <p><i class="fa-solid fa-arrows-to-dot footer-icon main-icon"></i>Social Media Links : </p>
                    <ul class="social">
                        <a href="https://www.instagram.com/salangpurhanumanji_official/?igshid=1tvbblkjsmms1"><i class="fa-brands fa-instagram media-icon"></i></a>
                        <a href="https://www.facebook.com/SalangpurHanuman/"><i class="fa-brands fa-facebook media-icon"></i></a>
                        <a href="https://www.youtube.com/user/salangpurhanumanji"><i class="fa-brands fa-youtube media-icon"></i></a>
                        <a href="https://twitter.com/kashtbhanjandev?ref_src=twsrc%5Etfw"><i class="fa-brands fa-x-twitter media-icon"></i></a>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <script src="/static/Room_Booking/Room_Booking.js"></script>
    <script src="/static/Feedback/Feedback.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>

var options = {
    "key": "rzp_test_8WbzVlHnGFIQf0", // Enter the Key ID generated from the Dashboard
    "amount": "{{payment.amount}}", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
    "currency": "INR",
    "name": "Shree Kashtabhanjan Dev Hanumanji Mandir, Salangpur",
    "description": "Test Transaction",
    "image": "/static/Images/logo.jpg",
    "order_id": "{{payment.id}}", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
    "handler": function (response){
        alert("Payment Successful");
    },
    "theme": {
        "color": "#3399cc"
    }
};
var rzp1 = new Razorpay(options);
rzp1.on('payment.failed', function (response){
        alert(response.error.code);
        alert(response.error.description);
        alert(response.error.source);
        alert(response.error.step);
        alert(response.error.reason);
        alert(response.error.metadata.order_id);
        alert(response.error.metadata.payment_id);
});
document.getElementById('submit').onclick = function(e){
    document.getElementById('Donation_form').submit();
}
</script>

<script>

    if ('{{flag}}' == '1') {
    rzp1.open();
}

</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
    $(document).ready(function() {
        // Check if the user is authenticated
        var isAuthenticated = "{{ user.is_authenticated }}";
    
        if (isAuthenticated === "False") {
            // User is not logged in, display alert and redirect
            alert("You are not logged in. Please log in to access this page.");
            window.location.replace("/SignIn");
        }
    });
    </script>

</body>

</html>